{"mappings":"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","sources":["public/js/js.js"],"sourcesContent":["const videoElement = document.getElementsByClassName('input_video')[0];\nlet send = false;\nvideoElement.style.display = 'none';\nconst canvasElement = document.getElementsByClassName('output_canvas')[0];\nconst canvasCtx = canvasElement.getContext('2d');\nlet token = document.getElementById('token').textContent;\nlet x =0;\nlet zeros = new Array(21).fill(0);\nlet resetSentence = +document.getElementById('resetSentence').textContent;\nlet newReqEvery = +document.getElementById('newReqEvery').textContent;\nsetInterval(() => {\n    send= !send;\n}, newReqEvery);\nlet sentence = [];\nsetInterval(() => {\n    sentence= [];\n}, resetSentence);\n//remove the v and update the server\nfunction onResults(results) {\n    canvasCtx.save();\n    canvasCtx.clearRect(0, 0, canvasElement.width, canvasElement.height);\n    canvasCtx.drawImage(results.image, 0, 0, canvasElement.width, canvasElement.height);\n    if (results.multiHandLandmarks) {\n        for (const landmarks of results.multiHandLandmarks) {\n            drawConnectors(canvasCtx, landmarks, HAND_CONNECTIONS,\n            {color: '#FF5959', lineWidth: 5});\n            drawLandmarks(canvasCtx, landmarks, {color: '#FACF5A', lineWidth: 3});\n        }\n    }\n    canvasCtx.restore();\n    if(results.multiHandLandmarks.length == 0) return;\n    if(!send) return;\n    if(results.multiHandLandmarks.length == 1){\n        let x = [...results.multiHandLandmarks[0].map(e=> e.x), ...zeros];\n        let y = [...results.multiHandLandmarks[0].map(e=> e.y), ...zeros];\n        let z = [...results.multiHandLandmarks[0].map(e=> e.z), ...zeros];\n        // let v = [...results.multiHandLandmarks[0].map(e=> 0), ...zeros];\n        let data = {x, y, z};\n        (async () => {\n            try{\n            send = false;\n            const rawResponse = await fetch('https://sih-handsign-detection-api.wl.r.appspot.com/api', {\n                method: 'POST',\n                headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(data)\n            });\n            const content = await rawResponse.json();\n            if(sentence[sentence.length-1] == content.result.class) return;\n            sentence.push(content.result.class);\n            document.querySelector('.translate').textContent = sentence.join(' ');\n            await fetch(`/hoster/update/${token}`, {\n                method: 'PATCH',\n                headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    \"sentence\": sentence\n                })\n            });\n            }catch(er){\n            console.log(er)\n            }\n        })();\n        return;\n    }\n    let x = [...results.multiHandLandmarks[0].map(e=> e.x), ...results.multiHandLandmarks[1].map(e=> e.x)];\n    let y = [...results.multiHandLandmarks[0].map(e=> e.y), ...results.multiHandLandmarks[1].map(e=> e.y)];\n    let z = [...results.multiHandLandmarks[0].map(e=> e.z), ...results.multiHandLandmarks[1].map(e=> e.z)];\n    // let v = [...results.multiHandLandmarks[0].map(e=> 0), ...results.multiHandLandmarks[1].map(e=> 0)];\n    let data = {x, y, z};\n    (async () => {\n        try{\n        send = false;\n        const rawResponse = await fetch('https://sih-handsign-detection-api.wl.r.appspot.com/api', {\n            method: 'POST',\n            headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(data)\n        });\n        const content = await rawResponse.json();\n        if(sentence[sentence.length-1] == content.result.class) return;\n        sentence.push(content.result.class);\n        document.querySelector('.translate').textContent = sentence.join(' ');\n        await fetch(`/hoster/update/${token}`, {\n            method: 'PATCH',\n            headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                \"sentence\": sentence\n            })\n        });\n        }catch(er){\n        console.log(er)\n        }\n    })();\n}\nconst hands = new Hands({locateFile: (file) => {\nreturn `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`;\n}});\nhands.setOptions({\nmaxNumHands: 2,\nmodelComplexity: 1,\nminDetectionConfidence: 0.8,\nminTrackingConfidence: 0.5\n});\nhands.onResults(onResults);\nconst camera = new Camera(videoElement, {\nonFrame: async () => {\nawait hands.send({image: videoElement});\n},\nwidth: canvasElement.width,\nheight: canvasElement.height\n});\ncamera.start();\n"],"names":["$a585e2c8d8b0653a$var$videoElement","document","getElementsByClassName","$a585e2c8d8b0653a$var$send","style","display","$a585e2c8d8b0653a$var$canvasElement","$a585e2c8d8b0653a$var$canvasCtx","getContext","$a585e2c8d8b0653a$var$token","getElementById","textContent","$a585e2c8d8b0653a$var$zeros","Array","fill","$a585e2c8d8b0653a$var$resetSentence","$a585e2c8d8b0653a$var$newReqEvery","setInterval","$a585e2c8d8b0653a$var$sentence","$a585e2c8d8b0653a$var$hands","Hands","locateFile","file","setOptions","maxNumHands","modelComplexity","minDetectionConfidence","minTrackingConfidence","onResults","results","save","clearRect","width","height","drawImage","image","multiHandLandmarks","landmarks","drawConnectors","HAND_CONNECTIONS","color","lineWidth","drawLandmarks","restore","length","data","x","map","e","y","z","rawResponse","fetch","method","headers","Accept","body","JSON","stringify","content","json","result","class","push","querySelector","join","sentence","er","console","log","Camera","onFrame","send","start"],"version":3,"file":"js.js.map","sourceRoot":"../../"}